function setIconCallback(n){n&&n.runState?chrome.browserAction.setIcon({path:{16:"icons/gusmd16-active.png"}}):chrome.browserAction.setIcon({path:{16:"icons/gusmd16-idle.png"}})}var chrome=window.chrome,originalHTML="";chrome.browserAction.onClicked.addListener(function(){chrome.tabs.query({active:!0,currentWindow:!0},function(n){chrome.tabs.sendMessage(n[0].id,{changeRun:!0,originalHTML:originalHTML},function(n){n.originalHTML&&(originalHTML=n.originalHTML),setIconCallback(n)})})}),chrome.tabs.onActivated.addListener(function(n){chrome.tabs.get(n.tabId,function(n){chrome.tabs.query({active:!0,currentWindow:!0},function(n){chrome.tabs.sendMessage(n[0].id,{getCurrentRunState:!0},function(n){setIconCallback(n)})})})}),chrome.tabs.onUpdated.addListener(function(n,e,o){chrome.tabs.query({active:!0,currentWindow:!0},function(n){chrome.tabs.sendMessage(n[0].id,{getCurrentRunState:!0},function(n){setIconCallback(n)})})}),chrome.runtime.onMessage.addListener(function(n,e){n.iframe&&chrome.browserAction.setIcon({path:{16:"icons/gusmd16-active.png"}}),n.originalHTML&&(originalHTML=n.originalHTML)});
